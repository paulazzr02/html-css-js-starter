// ========================================
// Accessibility 유틸리티 클래스
// @group utilities
// @description 접근성 개선을 위한 유틸리티 클래스들
//
// 사용법:
// <div class="u__sr-only">스크린 리더 전용 텍스트</div>
// <div class="u__sr-only--focusable">포커스 시 표시되는 텍스트</div>
// <div class="u__skip-link">스킵 링크</div>
//
// 주요 클래스:
// - u__sr-only: 스크린 리더 전용 텍스트
// - u__sr-only--focusable: 포커스 시 표시되는 스크린 리더 텍스트
// - u__skip-link: 스킵 링크
// ========================================

@use 'sass:color';
@use '../abstracts/variables' as *;

// 유틸리티 블록 (Block)
// Note: color.scale() 사용을 위해 Sass 변수 사용
.u {
  // 스크린 리더 전용 텍스트
  &__sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border: 0;

    // 포커스 시 표시
    &--focusable {
      &:active,
      &:focus {
        position: static;
        width: auto;
        height: auto;
        overflow: visible;
        clip: auto;
        white-space: normal;
      }
    }
  }

  // 스킵 링크 (WCAG 2 AA 준수)
  &__skip-link {
    position: fixed;
    top: 0;
    left: 0.375rem; // 6px
    z-index: $cs-zindex-tooltip; // 모든 요소 위에 표시
    color: var(--krds-color-light-gray-0, var(--cs-white));
    background-color: var(--krds-color-light-primary-50, var(--cs-primary));
    padding: var(--krds-number-2, var(--cs-spacing-sm)) var(--krds-number-6, var(--cs-spacing-md)); // 8px 16px
    text-decoration: none;
    border-radius: var(--krds-number-1, var(--cs-spacing-xs)); // 4px
    font-size: 1rem; // 16px
    font-weight: 500;
    white-space: nowrap;
    // 기본 상태에서 완전히 숨김 (화면 밖으로 이동)
    transform: translateY(-100%);
    transition: transform 0.2s ease-in-out;

    // WCAG AA: 포커스 시 표시 (키보드 접근성)
    &:focus {
      transform: translateY(0);
      outline: 0.125rem solid var(--krds-color-light-gray-0, var(--cs-white)); // 2px, WCAG AA 대비율 4.5:1 이상
      outline-offset: 0.125rem; // 2px
    }

    // WCAG AA: 포커스-비저블 지원
    &:focus-visible {
      transform: translateY(0);
      outline: 0.125rem solid var(--krds-color-light-gray-0, var(--cs-white));
      outline-offset: 0.125rem;
    }

    // 호버 상태 (마우스 사용자) - Sass 변수로 계산
    &:hover {
      background-color: color.scale($cs-color-primary, $lightness: -10%);
    }
  }

  // 포커스 표시
  &__focus {
    &:focus {
      outline: 2px solid var(--krds-color-light-primary-50, var(--cs-primary));
      outline-offset: 2px;
    }
  }

  // 포커스 제거
  &__focus--none {
    &:focus {
      outline: none;
    }
  }

  // 고대비 모드 지원
  &__high-contrast {
    @media (prefers-contrast: high) {
      border: 2px solid currentColor;
    }
  }

  // 애니메이션 감소 모드 지원
  &__reduce-motion {
    @media (prefers-reduced-motion: reduce) {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
    }
  }
}
