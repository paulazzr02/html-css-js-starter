// ========================================
// Button 컴포넌트 스타일
// @group components
// @description 버튼 컴포넌트 (Mixin 기반, BEM 규칙 준수)
// 여러 컴포넌트에서 재사용 가능한 버튼 스타일
// ========================================

@use 'sass:color';
@use 'sass:map';
@use 'abstracts/variables' as *;
@use 'abstracts/config' as *;

// 버튼 공통 스타일
.c-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
  padding: 0.375rem 1.25rem; // 세로 padding: 0.375rem (form 요소와 동일)
  border: none;
  border-radius: map.get($border-radius-map, 2);
  font-size: $cs-font-size-base;
  font-weight: 500;
  line-height: 1.5;
  cursor: pointer;
  background-color: transparent; // 기본값: 투명 (테마 modifier에서 덮어씀)
  color: $cs-color-text-primary; // 기본 텍스트 색상
  // hover/active 상태에서만 transition 적용 (각 테마 modifier에서 정의)
  white-space: nowrap;
  // 총 높이: 0.375rem (상) + 1.5rem (텍스트) + 0.375rem (하) ≈ 2.25rem (36px)
  transform: scale(1);

  &:hover {
    opacity: 0.9;
  }

  &:active {
    transform: scale(0.98);
    transition: transform $cs-transition-fast; // active 상태에서만 transform transition 적용
  }

  &:disabled {
    opacity: 0.6;
    cursor: not-allowed;
  }

  .c-icon {
    flex-shrink: 0;
  }

  // ----------------------------------------
  // 버튼 사이즈 Modifier
  // ----------------------------------------

  // Extra Small 사이즈
  &--xs {
    padding: 0.25rem 0.75rem;
    font-size: 0.8125rem; // 13px
    height: 1.75rem; // 28px
    border-radius: map.get($border-radius-map, 1);
    gap: 0.375rem;

    .c-icon {
      width: 0.875rem; // 14px
      height: 0.875rem;
    }
  }

  // Small 사이즈
  &--sm {
    padding: 0.3125rem 0.875rem;
    font-size: 0.875rem; // 14px
    height: 2rem; // 32px
    border-radius: map.get($border-radius-map, 2);
    gap: 0.4375rem;

    .c-icon {
      width: 0.9375rem; // 15px
      height: 0.9375rem;
    }
  }

  // Medium 사이즈 (기본값)
  // padding, font-size, height는 기본 .c-btn에 정의됨

  // Large 사이즈
  &--lg {
    padding: 0.5rem 1.5rem;
    font-size: 1.125rem; // 18px
    height: 2.75rem; // 44px
    border-radius: map.get($border-radius-map, 3);
    gap: 0.625rem;

    .c-icon {
      width: 1.125rem; // 18px
      height: 1.125rem;
    }
  }

  // Extra Large 사이즈
  &--xl {
    padding: 0.625rem 2rem;
    font-size: 1.25rem; // 20px
    height: 3.25rem; // 52px
    border-radius: map.get($border-radius-map, 3);
    gap: 0.75rem;

    .c-icon {
      width: 1.25rem; // 20px
      height: 1.25rem;
    }
  }

  // ----------------------------------------
  // 테마 색상 Modifier
  // ----------------------------------------

  // Primary 테마
  &--primary {
    background-color: $cs-color-primary;
    color: $cs-color-white;

    // 어두운 배경이므로 흰색 아이콘
    .c-icon {
      filter: brightness(0) invert(1);
    }

    &:hover:not(:disabled) {
      background-color: color.adjust($cs-color-primary, $lightness: -5%);
    }

    &:active:not(:disabled) {
      background-color: color.adjust($cs-color-primary, $lightness: -10%);
    }
  }

  // Secondary 테마
  &--secondary {
    background-color: $cs-color-secondary;
    color: $cs-color-white;
    transition: background-color $cs-transition-base; // hover/active에서만 transition 적용

    // 어두운 배경이므로 흰색 아이콘
    .c-icon {
      filter: brightness(0) invert(1);
    }

    &:hover:not(:disabled) {
      background-color: color.adjust($cs-color-secondary, $lightness: -5%);
    }

    &:active:not(:disabled) {
      background-color: color.adjust($cs-color-secondary, $lightness: -10%);
    }
  }

  // Success 테마
  &--success {
    background-color: $cs-color-success;
    color: $cs-color-white;
    transition: background-color $cs-transition-base; // hover/active에서만 transition 적용

    // 어두운 배경이므로 흰색 아이콘
    .c-icon {
      filter: brightness(0) invert(1);
    }

    &:hover:not(:disabled) {
      background-color: color.adjust($cs-color-success, $lightness: -5%);
    }

    &:active:not(:disabled) {
      background-color: color.adjust($cs-color-success, $lightness: -10%);
    }
  }

  // Danger 테마 (CSS 변수 사용 - color.adjust 불가)
  &--danger {
    background-color: $cs-color-danger;
    color: $cs-color-white;
    transition:
      opacity $cs-transition-base,
      filter $cs-transition-base; // hover/active에서만 transition 적용

    // 어두운 배경이므로 흰색 아이콘
    .c-icon {
      filter: brightness(0) invert(1);
    }

    &:hover:not(:disabled) {
      opacity: 0.9;
      filter: brightness(0.95);
    }

    &:active:not(:disabled) {
      opacity: 0.85;
      filter: brightness(0.9);
    }
  }

  // Warning 테마 (CSS 변수 사용 - color.adjust 불가)
  &--warning {
    background-color: $cs-color-warning;
    color: $cs-color-white;
    transition:
      opacity $cs-transition-base,
      filter $cs-transition-base; // hover/active에서만 transition 적용

    // 어두운 배경이므로 흰색 아이콘
    .c-icon {
      filter: brightness(0) invert(1);
    }

    &:hover:not(:disabled) {
      opacity: 0.9;
      filter: brightness(0.95);
    }

    &:active:not(:disabled) {
      opacity: 0.85;
      filter: brightness(0.9);
    }
  }

  // Info 테마 (CSS 변수 사용 - color.adjust 불가)
  &--info {
    background-color: $cs-color-info;
    color: $cs-color-white;
    transition:
      opacity $cs-transition-base,
      filter $cs-transition-base; // hover/active에서만 transition 적용

    // 어두운 배경이므로 흰색 아이콘
    .c-icon {
      filter: brightness(0) invert(1);
    }

    &:hover:not(:disabled) {
      opacity: 0.9;
      filter: brightness(0.95);
    }

    &:active:not(:disabled) {
      opacity: 0.85;
      filter: brightness(0.9);
    }
  }

  // Dark 테마
  &--dark {
    background-color: $cs-color-dark;
    color: $cs-color-white;
    transition: background-color $cs-transition-base; // hover/active에서만 transition 적용

    // 어두운 배경이므로 흰색 아이콘
    .c-icon {
      filter: brightness(0) invert(1);
    }

    &:hover:not(:disabled) {
      background-color: color.adjust($cs-color-dark, $lightness: 5%);
    }

    &:active:not(:disabled) {
      background-color: color.adjust($cs-color-dark, $lightness: 10%);
    }
  }

  // Light 테마
  &--light {
    background-color: $cs-color-light;
    color: $cs-color-text-primary;
    border: 1px solid $cs-border-color;
    transition:
      background-color $cs-transition-base,
      border-color $cs-transition-base; // hover/active에서만 transition 적용

    // 밝은 배경이므로 기본 색상 아이콘 (필터 없음)
    .c-icon {
      filter: none;
    }

    &:hover:not(:disabled) {
      background-color: color.adjust($cs-color-light, $lightness: -5%);
    }

    &:active:not(:disabled) {
      background-color: color.adjust($cs-color-light, $lightness: -10%);
    }
  }

  // ----------------------------------------
  // 버튼 유형 Modifier (기능/용도)
  // ----------------------------------------
  // 주의: 이 modifier들은 기본 스타일을 덧입히는 방식으로만 사용
  // 배경색, 컬러 등 variant 스타일은 테마 색상 modifier에서 처리

  // Search 버튼 유형
  &--search {
    min-width: 130px;

    // Search + Dark 조합: search-dark 배경색
    &.c-btn--dark {
      background-color: #253448;
      color: $cs-color-white;
      transition: background-color $cs-transition-base; // hover/active에서만 transition 적용

      &:hover:not(:disabled) {
        background-color: color.adjust(#253448, $lightness: 5%);
      }

      &:active:not(:disabled) {
        background-color: color.adjust(#253448, $lightness: 10%);
      }
    }
  }

  // Export 버튼 유형
  &--export {
    // Export 버튼 공통 스타일 (기능적 스타일만)
    // 테마 색상 modifier(--success, --primary 등)와 조합하여 사용
    min-width: fit-content;

    // Export + Success 조합: export-success 배경색
    &.c-btn--success {
      background-color: #0b9b79;
      color: $cs-color-white;
      transition: background-color $cs-transition-base; // hover/active에서만 transition 적용

      &:hover:not(:disabled) {
        background-color: color.adjust(#0b9b79, $lightness: -5%);
      }

      &:active:not(:disabled) {
        background-color: color.adjust(#0b9b79, $lightness: -10%);
      }
    }
  }

  // Download 버튼 유형
  &--download {
    // Download 버튼 공통 스타일 (기능적 스타일만)
    // 테마 색상 modifier(--success, --primary 등)와 조합하여 사용
    min-width: fit-content;

    // 다운로드 버튼 아이콘 스타일 (기능적 스타일)
    .c-icon {
      filter: brightness(0) invert(1); // 아이콘을 흰색으로 변경 (어두운 배경용)
    }

    // Download + Primary 조합: download-primary 배경색
    &.c-btn--primary {
      background-color: #1c5579;
      color: $cs-color-white;
      transition: background-color $cs-transition-base; // hover/active에서만 transition 적용

      &:hover:not(:disabled) {
        background-color: color.adjust(#1c5579, $lightness: -5%);
      }

      &:active:not(:disabled) {
        background-color: color.adjust(#1c5579, $lightness: -10%);
      }
    }

    // 밝은 배경 테마와 조합 시 아이콘 색상 조정
    &.c-btn--light .c-icon {
      filter: none; // 밝은 배경일 때는 기본 색상 사용
    }
  }

  // Count 버튼 유형 (숫자 + 텍스트 + X 아이콘)
  &--count {
    // 기본 스타일 오버라이드
    padding: $cs-spacing-xs $cs-spacing-sm $cs-spacing-xs $cs-spacing;
    border: 1px solid $cs-border-color;
    border-radius: 2em;
    background-color: $cs-color-white;
    color: $cs-color-text-primary;
    transition:
      background-color $cs-transition-fast,
      border-color $cs-transition-fast;

    &:hover:not(:disabled) {
      background-color: $cs-color-background-secondary;
      border-color: $cs-color-text-secondary;
      color: $cs-color-dark;
    }

    &:focus {
      outline: 2px solid rgba($cs-color-primary, 0.2);
      outline-offset: 2px;
    }

    // 개수 숫자 Element
    &__number {
      color: $cs-color-text-primary;
      font-weight: 600;
      font-size: $cs-font-size-base;
    }

    // 개수 텍스트 Element
    &__text {
      color: $cs-color-text-primary;
    }

    // X 아이콘 Element
    &__icon {
      width: 16px;
      height: 16px;
      flex-shrink: 0;
      margin-left: $cs-spacing-xs;
      opacity: 0.7;
      transition: opacity $cs-transition-fast;
      color: $cs-color-text-primary;
    }

    &:hover:not(:disabled) &__icon {
      opacity: 1;
    }
  }

  // Reset 버튼 유형 (특별한 스타일)
  &--reset {
    padding: 0;
    background: none;
    border: none;
    color: $cs-color-text-primary;
    letter-spacing: 0.2352px;
    // 높이는 기본값 유지 (2.25rem)

    &:hover {
      color: $cs-color-primary;
    }

    // Reset은 테마 색상을 무시
    &.c-btn--primary,
    &.c-btn--secondary,
    &.c-btn--success,
    &.c-btn--danger,
    &.c-btn--warning,
    &.c-btn--info,
    &.c-btn--dark,
    &.c-btn--light {
      background: none;
      border: none;
      color: $cs-color-text-primary;

      &:hover {
        color: $cs-color-primary;
      }
    }
  }
}
